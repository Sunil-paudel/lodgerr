{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/Header.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/layout/Header.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/Header.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/Header.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/layout/Header.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/Header.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgR,GAC7S,8CACA","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/Footer.tsx"],"sourcesContent":["const Footer = () => {\n  return (\n    <footer className=\"border-t py-8 bg-muted/50 mt-auto\">\n      <div className=\"container text-center text-sm text-muted-foreground\">\n        <p>&copy; {new Date().getFullYear()} Lodger. All rights reserved.</p>\n        <p className=\"mt-1\">Your Home Away From Home.</p>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n"],"names":[],"mappings":";;;;;AAAA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;wBAAE;wBAAQ,IAAI,OAAO,WAAW;wBAAG;;;;;;;8BACpC,8OAAC;oBAAE,WAAU;8BAAO;;;;;;;;;;;;;;;;;AAI5B;uCAEe","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/property/PropertyAmenityIcon.tsx"],"sourcesContent":["import { Wifi, ParkingCircle, Utensils, Tv, Wind, CheckCircle, Bath, BedDouble, ShieldCheck, Sun, Trees, Waves, PawPrint, Coffee, Heater, Dumbbell, WashingMachine, Box, Warehouse, UserCheck } from 'lucide-react';\nimport type { LucideProps } from 'lucide-react';\n\ninterface PropertyAmenityIconProps extends LucideProps {\n  amenity: string;\n}\n\nexport const PropertyAmenityIcon = ({ amenity, ...props }: PropertyAmenityIconProps) => {\n  const lowerAmenity = amenity.toLowerCase();\n\n  if (lowerAmenity.includes('wifi')) return <Wifi {...props} />;\n  if (lowerAmenity.includes('parking')) return <ParkingCircle {...props} />;\n  if (lowerAmenity.includes('kitchen')) return <Utensils {...props} />;\n  if (lowerAmenity.includes('tv') || lowerAmenity.includes('television')) return <Tv {...props} />;\n  if (lowerAmenity.includes('air conditioning') || lowerAmenity.includes('ac')) return <Wind {...props} />;\n  if (lowerAmenity.includes('washer')) return <WashingMachine {...props} />;\n  if (lowerAmenity.includes('dryer')) return <Box {...props} />; // Using Box as proxy for Dryer\n  if (lowerAmenity.includes('pool')) return <Waves {...props} />; \n  if (lowerAmenity.includes('gym') || lowerAmenity.includes('fitness')) return <Dumbbell {...props} />;\n  if (lowerAmenity.includes('pet friendly')) return <PawPrint {...props} />;\n  if (lowerAmenity.includes('heating') || lowerAmenity.includes('heater')) return <Heater {...props} />;\n  if (lowerAmenity.includes('dedicated workspace')) return <UserCheck {...props} />; // UserCheck for workspace\n\n  // More generic ones\n  if (lowerAmenity.includes('bath')) return <Bath {...props} />;\n  if (lowerAmenity.includes('bed')) return <BedDouble {...props} />;\n  if (lowerAmenity.includes('garden') || lowerAmenity.includes('patio')) return <Sun {...props} />;\n  if (lowerAmenity.includes('forest') || lowerAmenity.includes('hiking')) return <Trees {...props} />;\n  if (lowerAmenity.includes('beach')) return <Waves {...props} />;\n  if (lowerAmenity.includes('coffee')) return <Coffee {...props} />;\n  if (lowerAmenity.includes('elevator')) return <Warehouse {...props} />; // Using Warehouse as proxy for Elevator\n  \n\n  // Default icon for unmapped amenities\n  return <CheckCircle {...props} />;\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAOO,MAAM,sBAAsB,CAAC,EAAE,OAAO,EAAE,GAAG,OAAiC;IACjF,MAAM,eAAe,QAAQ,WAAW;IAExC,IAAI,aAAa,QAAQ,CAAC,SAAS,qBAAO,8OAAC,kMAAA,CAAA,OAAI;QAAE,GAAG,KAAK;;;;;;IACzD,IAAI,aAAa,QAAQ,CAAC,YAAY,qBAAO,8OAAC,wNAAA,CAAA,gBAAa;QAAE,GAAG,KAAK;;;;;;IACrE,IAAI,aAAa,QAAQ,CAAC,YAAY,qBAAO,8OAAC,0MAAA,CAAA,WAAQ;QAAE,GAAG,KAAK;;;;;;IAChE,IAAI,aAAa,QAAQ,CAAC,SAAS,aAAa,QAAQ,CAAC,eAAe,qBAAO,8OAAC,8LAAA,CAAA,KAAE;QAAE,GAAG,KAAK;;;;;;IAC5F,IAAI,aAAa,QAAQ,CAAC,uBAAuB,aAAa,QAAQ,CAAC,OAAO,qBAAO,8OAAC,kMAAA,CAAA,OAAI;QAAE,GAAG,KAAK;;;;;;IACpG,IAAI,aAAa,QAAQ,CAAC,WAAW,qBAAO,8OAAC,0NAAA,CAAA,iBAAc;QAAE,GAAG,KAAK;;;;;;IACrE,IAAI,aAAa,QAAQ,CAAC,UAAU,qBAAO,8OAAC,gMAAA,CAAA,MAAG;QAAE,GAAG,KAAK;;;;;cAAM,+BAA+B;IAC9F,IAAI,aAAa,QAAQ,CAAC,SAAS,qBAAO,8OAAC,oMAAA,CAAA,QAAK;QAAE,GAAG,KAAK;;;;;;IAC1D,IAAI,aAAa,QAAQ,CAAC,UAAU,aAAa,QAAQ,CAAC,YAAY,qBAAO,8OAAC,0MAAA,CAAA,WAAQ;QAAE,GAAG,KAAK;;;;;;IAChG,IAAI,aAAa,QAAQ,CAAC,iBAAiB,qBAAO,8OAAC,8MAAA,CAAA,WAAQ;QAAE,GAAG,KAAK;;;;;;IACrE,IAAI,aAAa,QAAQ,CAAC,cAAc,aAAa,QAAQ,CAAC,WAAW,qBAAO,8OAAC,sMAAA,CAAA,SAAM;QAAE,GAAG,KAAK;;;;;;IACjG,IAAI,aAAa,QAAQ,CAAC,wBAAwB,qBAAO,8OAAC,gNAAA,CAAA,YAAS;QAAE,GAAG,KAAK;;;;;cAAM,0BAA0B;IAE7G,oBAAoB;IACpB,IAAI,aAAa,QAAQ,CAAC,SAAS,qBAAO,8OAAC,kMAAA,CAAA,OAAI;QAAE,GAAG,KAAK;;;;;;IACzD,IAAI,aAAa,QAAQ,CAAC,QAAQ,qBAAO,8OAAC,gNAAA,CAAA,YAAS;QAAE,GAAG,KAAK;;;;;;IAC7D,IAAI,aAAa,QAAQ,CAAC,aAAa,aAAa,QAAQ,CAAC,UAAU,qBAAO,8OAAC,gMAAA,CAAA,MAAG;QAAE,GAAG,KAAK;;;;;;IAC5F,IAAI,aAAa,QAAQ,CAAC,aAAa,aAAa,QAAQ,CAAC,WAAW,qBAAO,8OAAC,oMAAA,CAAA,QAAK;QAAE,GAAG,KAAK;;;;;;IAC/F,IAAI,aAAa,QAAQ,CAAC,UAAU,qBAAO,8OAAC,oMAAA,CAAA,QAAK;QAAE,GAAG,KAAK;;;;;;IAC3D,IAAI,aAAa,QAAQ,CAAC,WAAW,qBAAO,8OAAC,sMAAA,CAAA,SAAM;QAAE,GAAG,KAAK;;;;;;IAC7D,IAAI,aAAa,QAAQ,CAAC,aAAa,qBAAO,8OAAC,4MAAA,CAAA,YAAS;QAAE,GAAG,KAAK;;;;;cAAM,wCAAwC;IAGhH,sCAAsC;IACtC,qBAAO,8OAAC,2NAAA,CAAA,cAAW;QAAE,GAAG,KAAK;;;;;;AAC/B","debugId":null}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/utils/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\nmongoose.set('strictQuery', false);\n\n// Ensure this MONGODB_URL is correct and your IP is whitelisted if using Atlas.\nconst MONGODB_URL= \"mongodb+srv://paudelsunil16:paudelsunil16@cluster0.dlua3bq.mongodb.net/\";\n\nconst connectDB = async () => {\n  if (mongoose.connection.readyState >= 1) {\n    console.log(\"MongoDB is already connected.\");\n    return;\n  }\n  try {\n    if (!MONGODB_URL) {\n      console.error(\"[DB Connect] MongoDB URI is not defined. Please set it in your environment variables or configuration.\");\n      throw new Error(\"Server configuration error: MONGODB_URI is not defined.\");\n    }\n    console.log(\"[DB Connect] Attempting to connect to MongoDB...\");\n    await mongoose.connect(MONGODB_URL);\n    console.log(\"[DB Connect] MongoDB connected successfully.\");\n  } catch (error: any) {\n    console.error(\"[DB Connect] MongoDB connection failed:\", error.message);\n    if (error.stack) {\n      console.error(\"[DB Connect] MongoDB connection error stack:\", error.stack);\n    } else {\n      console.error(\"[DB Connect] MongoDB connection error details:\", error);\n    }\n    // Construct a new error to ensure it's an Error instance with a clear message\n    throw new Error(\"Database connection failed: \" + error.message);\n  }\n};\n\nexport default connectDB;"],"names":[],"mappings":";;;AAAA;;AACA,yGAAA,CAAA,UAAQ,CAAC,GAAG,CAAC,eAAe;AAE5B,gFAAgF;AAChF,MAAM,cAAa;AAEnB,MAAM,YAAY;IAChB,IAAI,yGAAA,CAAA,UAAQ,CAAC,UAAU,CAAC,UAAU,IAAI,GAAG;QACvC,QAAQ,GAAG,CAAC;QACZ;IACF;IACA,IAAI;QACF,uCAAkB;;QAGlB;QACA,QAAQ,GAAG,CAAC;QACZ,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC;QACvB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,2CAA2C,MAAM,OAAO;QACtE,IAAI,MAAM,KAAK,EAAE;YACf,QAAQ,KAAK,CAAC,gDAAgD,MAAM,KAAK;QAC3E,OAAO;YACL,QAAQ,KAAK,CAAC,kDAAkD;QAClE;QACA,8EAA8E;QAC9E,MAAM,IAAI,MAAM,iCAAiC,MAAM,OAAO;IAChE;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 481, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/models/User.ts"],"sourcesContent":["\nimport mongoose, { Schema, Document } from \"mongoose\";\n\nexport interface IUser extends Document {\n  _id: mongoose.Types.ObjectId; // Explicitly define _id\n  name: string;\n  email: string;\n  passwordHash?: string;\n  role: \"guest\" | \"host\" | \"admin\";\n  stripeAccountId?: string;\n  avatarUrl?: string;\n  createdAt: Date;\n  updatedAt: Date; // Mongoose adds this with timestamps\n}\n\nconst userSchema = new Schema<IUser>(\n  {\n    name: { type: String, required: true },\n    email: { type: String, required: true, unique: true },\n    passwordHash: { type: String },\n    role: { type: String, enum: [\"guest\", \"host\", \"admin\"], default: \"guest\" },\n    stripeAccountId: { type: String },\n    avatarUrl: { type: String },\n  },\n  { \n    timestamps: true,\n    toJSON: {\n      virtuals: true, // ensure virtuals are included\n      transform: function (doc, ret) {\n        ret.id = ret._id.toString(); // map _id to id\n        delete ret._id;\n        delete ret.passwordHash; // remove passwordHash\n        delete ret.__v; // remove __v\n      }\n    },\n    toObject: { // Also apply transform for toObject if needed elsewhere\n      virtuals: true,\n      transform: function (doc, ret) {\n        ret.id = ret._id.toString();\n        delete ret._id;\n        delete ret.passwordHash;\n        delete ret.__v;\n      }\n    }\n  }\n);\n\nexport default mongoose.models.User || mongoose.model<IUser>(\"User\", userSchema);\n"],"names":[],"mappings":";;;AACA;;AAcA,MAAM,aAAa,IAAI,yGAAA,CAAA,SAAM,CAC3B;IACE,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,cAAc;QAAE,MAAM;IAAO;IAC7B,MAAM;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAS;YAAQ;SAAQ;QAAE,SAAS;IAAQ;IACzE,iBAAiB;QAAE,MAAM;IAAO;IAChC,WAAW;QAAE,MAAM;IAAO;AAC5B,GACA;IACE,YAAY;IACZ,QAAQ;QACN,UAAU;QACV,WAAW,SAAU,GAAG,EAAE,GAAG;YAC3B,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,QAAQ,IAAI,gBAAgB;YAC7C,OAAO,IAAI,GAAG;YACd,OAAO,IAAI,YAAY,EAAE,sBAAsB;YAC/C,OAAO,IAAI,GAAG,EAAE,aAAa;QAC/B;IACF;IACA,UAAU;QACR,UAAU;QACV,WAAW,SAAU,GAAG,EAAE,GAAG;YAC3B,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,QAAQ;YACzB,OAAO,IAAI,GAAG;YACd,OAAO,IAAI,YAAY;YACvB,OAAO,IAAI,GAAG;QAChB;IACF;AACF;uCAGa,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAQ,QAAQ","debugId":null}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["\nimport NextAuth, { type NextAuthOptions } from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport bcrypt from \"bcryptjs\";\n\nimport connectDB from \"@/utils/db\";         // MongoDB connection utility\nimport User from \"@/models/User\";           // Mongoose User model\n\nexport const authOptions: NextAuthOptions = {\n  // === Authentication Providers ===\n  providers: [\n    CredentialsProvider({\n      id: \"credentials\",\n      name: \"Credentials\",\n\n      // Fields for sign-in formx\n      credentials: {\n        email: { label: \"Email\", type: \"text\", placeholder: \"jsmith@example.com\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n\n      // Core login logic\n      async authorize(credentials) {\n        console.log(\"[Authorize] Credentials received:\", credentials ? { email: credentials.email, password_exists: !!credentials.password } : \"null_credentials\");\n\n        // Validate input\n        if (!credentials?.email || !credentials?.password) {\n          console.log(\"[Authorize] Missing email or password.\");\n          throw new Error(\"Please enter both email and password.\");\n        }\n\n        try {\n          console.log(\"[Authorize] Connecting to DB...\");\n          await connectDB();\n          console.log(\"[Authorize] DB connection successful.\");\n\n          const user = await User.findOne({ email: credentials.email });\n\n          if (!user) {\n            console.log(\"[Authorize] No user found with email:\", credentials.email);\n            throw new Error(\"No user found with this email.\");\n          }\n\n          if (!user.passwordHash) {\n            console.log(\"[Authorize] User has no password set:\", credentials.email);\n            throw new Error(\"User account is not properly configured for password login.\");\n          }\n\n          const isValidPassword = await bcrypt.compare(credentials.password, user.passwordHash);\n          if (!isValidPassword) {\n            console.log(\"[Authorize] Incorrect password for:\", credentials.email);\n            throw new Error(\"Invalid password.\");\n          }\n\n          // Success: Return user data matching the `User` interface in next-auth.d.ts\n          console.log(\"[Authorize] Login success for user:\", user._id.toString(), user.email);\n          return {\n            id: user._id.toString(), // Mongoose _id to string\n            name: user.name,\n            email: user.email,\n            image: user.avatarUrl, // This will map to DefaultAuthUser's `image`\n            role: user.role,\n          };\n        } catch (error: any) {\n          console.error(\"[Authorize] Unexpected error:\", error.message, error.stack);\n\n          // Re-throw specific known errors for NextAuth to handle and potentially display to user\n          if (\n            [\n              \"No user found with this email.\",\n              \"Invalid password.\",\n              \"User account is not properly configured for password login.\",\n              \"Please enter both email and password.\",\n            ].includes(error.message) || error.message.startsWith(\"Database connection failed:\") || error.message.startsWith(\"Server configuration error:\")\n          ) {\n            throw error;\n          }\n          // For other unexpected errors, throw a generic message\n          throw new Error(\"Authentication failed due to an unexpected server issue. Please try again.\");\n        }\n      },\n    }),\n  ],\n\n  // === Session Configuration ===\n  session: {\n    strategy: \"jwt\", // Use JWT tokens instead of DB sessions\n  },\n\n  // === Callback Functions ===\n  callbacks: {\n    // Modify JWT on login or session update\n    async jwt({ token, user, trigger, session: newSessionData }) { // Renamed `session` to `newSessionData` to avoid conflict\n      // On initial sign in, the `user` object from `authorize` is available\n      if (user) {\n        console.log(\"[JWT Callback] Initial user object from authorize:\", user);\n        token.id = user.id;\n        token.name = user.name;\n        token.email = user.email;\n        token.picture = user.image; // `user.image` from authorize maps to `token.picture`\n        token.role = user.role;\n      }\n\n      // Handle session updates (e.g., user updates profile)\n      if (trigger === \"update\" && newSessionData?.user) {\n        console.log(\"[JWT Callback] Updating token from session update data:\", newSessionData.user);\n        token.name = newSessionData.user.name;\n        token.email = newSessionData.user.email;\n        token.picture = newSessionData.user.image;\n        token.role = newSessionData.user.role;\n      }\n      console.log(\"[JWT Callback] Token before returning:\", token);\n      return token;\n    },\n\n    // Attach token data to session for use on client side\n    async session({ session, token }) {\n      console.log(\"[Session Callback] Token received:\", token);\n      if (token) {\n        // Ensure session.user exists and is structured according to `next-auth.d.ts`\n        session.user = {\n          id: token.id as string,\n          name: token.name,\n          email: token.email,\n          image: token.picture, // Map token.picture (from JWT) to session.user.image\n          role: token.role as string | undefined,\n        };\n      }\n      console.log(\"[Session Callback] Session user before returning:\", session.user);\n      return session;\n    },\n  },\n\n  // === Custom Auth Pages ===\n  pages: {\n    signIn: \"/login\",\n    error: \"/login\", // Errors will append ?error= to the URL\n  },\n\n  // === Secret for signing JWT ===\n  secret: process.env.NEXTAUTH_SECRET\n};\n\n// Export for Next.js API routes\nconst handler = NextAuth(authOptions);\nexport { handler as GET, handler as POST };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 694, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/models/Property.ts"],"sourcesContent":["\nimport mongoose, { Schema, Document } from 'mongoose';\nimport type { Property as PropertyType, PricePeriod } from '@/lib/types';\n\nexport interface PropertyDocument extends Omit<PropertyType, 'id' | 'hostId' | 'images' | 'createdAt' | 'host' | 'pricePerNight'>, Document {\n  hostId: mongoose.Types.ObjectId;\n  images: string[];\n  price: number; // New field\n  pricePeriod: PricePeriod; // New field\n  host: {\n    name: string;\n    avatarUrl?: string;\n  };\n  createdAt: Date;\n  updatedAt: Date;\n  availableFrom?: Date;\n  availableTo?: Date;\n}\n\nconst propertySchema = new Schema<PropertyDocument>(\n  {\n    hostId: {\n      type: Schema.Types.ObjectId,\n      ref: 'User',\n      required: true,\n    },\n    title: {\n      type: String,\n      required: true,\n      trim: true,\n    },\n    description: {\n      type: String,\n      required: true,\n    },\n    price: { // Changed from pricePerNight\n      type: Number,\n      required: true,\n      min: 0,\n    },\n    pricePeriod: { // Added\n      type: String,\n      enum: ['nightly', 'weekly', 'monthly'] as PricePeriod[],\n      required: true,\n      default: 'nightly',\n    },\n    location: {\n      type: String,\n      required: true,\n      trim: true,\n    },\n    address: {\n      type: String,\n      trim: true,\n    },\n    maxGuests: {\n      type: Number,\n      required: true,\n      min: 1,\n    },\n    images: {\n      type: [String],\n      validate: {\n        validator: function(v: string[]) {\n          return v == null || v.length === 0 || v.every(url => typeof url === 'string' && url.startsWith('http'));\n        },\n        message: 'All image entries must be valid URLs.'\n      },\n      default: [],\n    },\n    bedrooms: {\n      type: Number,\n      required: true,\n      min: 0,\n    },\n    bathrooms: {\n      type: Number,\n      required: true,\n      min: 0,\n    },\n    amenities: {\n      type: [String],\n      default: [],\n    },\n    type: {\n      type: String,\n      enum: ['House', 'Apartment', 'Room', 'Unique Stay'],\n      required: true,\n    },\n    host: {\n      name: { type: String, required: true },\n      avatarUrl: { type: String },\n    },\n    rating: {\n      type: Number,\n      min: 0,\n      max: 5,\n    },\n    reviewsCount: {\n      type: Number,\n      min: 0,\n      default: 0,\n    },\n    availableFrom: {\n      type: Date,\n      required: false,\n    },\n    availableTo: {\n      type: Date,\n      required: false,\n    },\n  },\n  {\n    timestamps: true,\n    toJSON: {\n      virtuals: true,\n      transform: function (doc, ret) {\n        ret.id = ret._id.toString();\n        delete ret._id;\n        delete ret.__v;\n        if (ret.hostId instanceof mongoose.Types.ObjectId) {\n          ret.hostId = ret.hostId.toString();\n        }\n      }\n    },\n    toObject: {\n      virtuals: true,\n      transform: function (doc, ret) {\n        ret.id = ret._id.toString();\n        delete ret._id;\n        delete ret.__v;\n        if (ret.hostId instanceof mongoose.Types.ObjectId) {\n          ret.hostId = ret.hostId.toString();\n        }\n      }\n    }\n  }\n);\n\npropertySchema.index({ location: 'text', title: 'text', description: 'text' });\npropertySchema.index({ hostId: 1 });\npropertySchema.index({ createdAt: -1 });\n\n\nexport default mongoose.models.Property || mongoose.model<PropertyDocument>(\"Property\", propertySchema);\n"],"names":[],"mappings":";;;AACA;;AAkBA,MAAM,iBAAiB,IAAI,yGAAA,CAAA,SAAM,CAC/B;IACE,QAAQ;QACN,MAAM,yGAAA,CAAA,SAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,KAAK;QACL,UAAU;IACZ;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,MAAM;IACR;IACA,aAAa;QACX,MAAM;QACN,UAAU;IACZ;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,KAAK;IACP;IACA,aAAa;QACX,MAAM;QACN,MAAM;YAAC;YAAW;YAAU;SAAU;QACtC,UAAU;QACV,SAAS;IACX;IACA,UAAU;QACR,MAAM;QACN,UAAU;QACV,MAAM;IACR;IACA,SAAS;QACP,MAAM;QACN,MAAM;IACR;IACA,WAAW;QACT,MAAM;QACN,UAAU;QACV,KAAK;IACP;IACA,QAAQ;QACN,MAAM;YAAC;SAAO;QACd,UAAU;YACR,WAAW,SAAS,CAAW;gBAC7B,OAAO,KAAK,QAAQ,EAAE,MAAM,KAAK,KAAK,EAAE,KAAK,CAAC,CAAA,MAAO,OAAO,QAAQ,YAAY,IAAI,UAAU,CAAC;YACjG;YACA,SAAS;QACX;QACA,SAAS,EAAE;IACb;IACA,UAAU;QACR,MAAM;QACN,UAAU;QACV,KAAK;IACP;IACA,WAAW;QACT,MAAM;QACN,UAAU;QACV,KAAK;IACP;IACA,WAAW;QACT,MAAM;YAAC;SAAO;QACd,SAAS,EAAE;IACb;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAS;YAAa;YAAQ;SAAc;QACnD,UAAU;IACZ;IACA,MAAM;QACJ,MAAM;YAAE,MAAM;YAAQ,UAAU;QAAK;QACrC,WAAW;YAAE,MAAM;QAAO;IAC5B;IACA,QAAQ;QACN,MAAM;QACN,KAAK;QACL,KAAK;IACP;IACA,cAAc;QACZ,MAAM;QACN,KAAK;QACL,SAAS;IACX;IACA,eAAe;QACb,MAAM;QACN,UAAU;IACZ;IACA,aAAa;QACX,MAAM;QACN,UAAU;IACZ;AACF,GACA;IACE,YAAY;IACZ,QAAQ;QACN,UAAU;QACV,WAAW,SAAU,GAAG,EAAE,GAAG;YAC3B,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,QAAQ;YACzB,OAAO,IAAI,GAAG;YACd,OAAO,IAAI,GAAG;YACd,IAAI,IAAI,MAAM,YAAY,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACjD,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,QAAQ;YAClC;QACF;IACF;IACA,UAAU;QACR,UAAU;QACV,WAAW,SAAU,GAAG,EAAE,GAAG;YAC3B,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,QAAQ;YACzB,OAAO,IAAI,GAAG;YACd,OAAO,IAAI,GAAG;YACd,IAAI,IAAI,MAAM,YAAY,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACjD,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,QAAQ;YAClC;QACF;IACF;AACF;AAGF,eAAe,KAAK,CAAC;IAAE,UAAU;IAAQ,OAAO;IAAQ,aAAa;AAAO;AAC5E,eAAe,KAAK,CAAC;IAAE,QAAQ;AAAE;AACjC,eAAe,KAAK,CAAC;IAAE,WAAW,CAAC;AAAE;uCAGtB,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAmB,YAAY","debugId":null}},
    {"offset": {"line": 851, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/property/PropertyBookingCalendar.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const PropertyBookingCalendar = registerClientReference(\n    function() { throw new Error(\"Attempted to call PropertyBookingCalendar() from the server but PropertyBookingCalendar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/property/PropertyBookingCalendar.tsx <module evaluation>\",\n    \"PropertyBookingCalendar\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,0BAA0B,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACzD;IAAa,MAAM,IAAI,MAAM;AAA8P,GAC3R,qFACA","debugId":null}},
    {"offset": {"line": 865, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/property/PropertyBookingCalendar.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const PropertyBookingCalendar = registerClientReference(\n    function() { throw new Error(\"Attempted to call PropertyBookingCalendar() from the server but PropertyBookingCalendar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/property/PropertyBookingCalendar.tsx\",\n    \"PropertyBookingCalendar\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,0BAA0B,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACzD;IAAa,MAAM,IAAI,MAAM;AAA8P,GAC3R,iEACA","debugId":null}},
    {"offset": {"line": 879, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 889, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/carousel.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Carousel = registerClientReference(\n    function() { throw new Error(\"Attempted to call Carousel() from the server but Carousel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx <module evaluation>\",\n    \"Carousel\",\n);\nexport const CarouselContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselContent() from the server but CarouselContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx <module evaluation>\",\n    \"CarouselContent\",\n);\nexport const CarouselItem = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselItem() from the server but CarouselItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx <module evaluation>\",\n    \"CarouselItem\",\n);\nexport const CarouselNext = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselNext() from the server but CarouselNext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx <module evaluation>\",\n    \"CarouselNext\",\n);\nexport const CarouselPrevious = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselPrevious() from the server but CarouselPrevious is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx <module evaluation>\",\n    \"CarouselPrevious\",\n);\n"],"names":[],"mappings":";;;;;;;AAAA;;AACO,MAAM,WAAW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC1C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,gEACA;AAEG,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,gEACA;AAEG,MAAM,eAAe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,gEACA;AAEG,MAAM,eAAe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,gEACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,gEACA","debugId":null}},
    {"offset": {"line": 919, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/carousel.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Carousel = registerClientReference(\n    function() { throw new Error(\"Attempted to call Carousel() from the server but Carousel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx\",\n    \"Carousel\",\n);\nexport const CarouselContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselContent() from the server but CarouselContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx\",\n    \"CarouselContent\",\n);\nexport const CarouselItem = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselItem() from the server but CarouselItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx\",\n    \"CarouselItem\",\n);\nexport const CarouselNext = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselNext() from the server but CarouselNext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx\",\n    \"CarouselNext\",\n);\nexport const CarouselPrevious = registerClientReference(\n    function() { throw new Error(\"Attempted to call CarouselPrevious() from the server but CarouselPrevious is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/carousel.tsx\",\n    \"CarouselPrevious\",\n);\n"],"names":[],"mappings":";;;;;;;AAAA;;AACO,MAAM,WAAW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC1C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,4CACA;AAEG,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,4CACA;AAEG,MAAM,eAAe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,4CACA;AAEG,MAAM,eAAe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,4CACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,4CACA","debugId":null}},
    {"offset": {"line": 949, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 959, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/properties/%5Bid%5D/page.tsx"],"sourcesContent":["\nimport Image from 'next/image';\nimport Header from '@/components/layout/Header';\nimport Footer from '@/components/layout/Footer';\nimport { Button } from '@/components/ui/button';\nimport { MapPin, BedDouble, Bath, Users, Star, Edit3, AlertTriangle, Home as HomeIcon, ImageIcon, UserCircle, Calendar as CalendarIconLucide, DollarSign, Wifi } from 'lucide-react';\nimport type { Metadata } from 'next';\nimport { PropertyAmenityIcon } from '@/components/property/PropertyAmenityIcon';\nimport Link from 'next/link';\nimport { getServerSession } from 'next-auth/next';\nimport { authOptions } from '@/app/api/auth/[...nextauth]/route';\nimport connectDB from '@/utils/db';\nimport PropertyModel from '@/models/Property';\nimport type { Property as PropertyType } from '@/lib/types';\nimport mongoose from 'mongoose';\nimport { PropertyBookingCalendar } from '@/components/property/PropertyBookingCalendar';\nimport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselNext,\n  CarouselPrevious,\n} from \"@/components/ui/carousel\"\n\n\ninterface PropertyDetailsPageProps {\n  params: { id: string };\n}\n\nasync function fetchPropertyById(id: string): Promise<PropertyType | null> {\n  if (!mongoose.Types.ObjectId.isValid(id)) {\n    console.warn(`[PropertyDetailsPage] Invalid property ID format: ${id}`);\n    return null;\n  }\n  await connectDB();\n  try {\n    const propertyDoc = await PropertyModel.findById(id).lean();\n    if (!propertyDoc) {\n      console.warn(`[PropertyDetailsPage] Property not found for ID: ${id}`);\n      return null;\n    }\n\n    const { _id, __v, hostId, createdAt, updatedAt, ...rest } = propertyDoc as any;\n\n    return {\n      id: _id.toString(),\n      hostId: (hostId as mongoose.Types.ObjectId).toString(),\n      images: propertyDoc.images || [],\n      price: propertyDoc.price, \n      pricePeriod: propertyDoc.pricePeriod, \n      createdAt: createdAt instanceof Date ? createdAt : new Date(createdAt),\n      updatedAt: updatedAt instanceof Date ? updatedAt : new Date(updatedAt),\n      host: {\n          name: propertyDoc.host?.name || 'Unknown Host',\n          avatarUrl: propertyDoc.host?.avatarUrl\n      },\n      ...rest,\n    } as PropertyType;\n\n  } catch (error) {\n    console.error(`[PropertyDetailsPage] Error fetching property by ID ${id}:`, error);\n    return null;\n  }\n}\n\nexport async function generateMetadata({ params }: PropertyDetailsPageProps): Promise<Metadata> {\n  const property = await fetchPropertyById(params.id);\n  if (!property) {\n    return {\n      title: 'Property Not Found - Lodger',\n    };\n  }\n  return {\n    title: `${property.title} - Lodger`,\n    description: property.description.substring(0, 160),\n  };\n}\n\nconst PropertyDetailsPage = async ({ params }: PropertyDetailsPageProps) => {\n  const session = await getServerSession(authOptions);\n  const property = await fetchPropertyById(params.id);\n\n  if (!property) {\n    return (\n      <div className=\"flex flex-col min-h-screen\">\n        <Header />\n        <main className=\"flex-grow container mx-auto px-4 py-8 text-center flex flex-col justify-center items-center\">\n          <AlertTriangle className=\"h-16 w-16 text-destructive mb-4\" />\n          <h1 className=\"text-3xl font-bold mb-4 font-headline text-primary\">Property Not Found</h1>\n          <p className=\"text-muted-foreground mb-6\">The property ID might be invalid, the property does not exist, or there was an issue fetching the details.</p>\n          <Button asChild className=\"bg-accent hover:bg-accent/90 text-accent-foreground\">\n            <Link href=\"/\">Go Back to Homepage</Link>\n          </Button>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  const isOwner = session?.user?.id === property.hostId;\n  const isAdmin = session?.user?.role === 'admin';\n\n  const hostAvatarHint = \"host avatar\";\n\n  const getPricePeriodText = (period: PropertyType['pricePeriod']) => {\n    switch (period) {\n      case 'weekly':\n        return '/ week';\n      case 'monthly':\n        return '/ month';\n      case 'nightly':\n      default:\n        return '/ night';\n    }\n  };\n\n  const hasImages = property.images && property.images.length > 0;\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-background\">\n      <Header />\n      <main className=\"flex-grow container mx-auto px-4 py-8 md:py-12\">\n        <div className=\"flex flex-wrap justify-between items-start mb-6\">\n            <div>\n                <h1 className=\"text-3xl md:text-4xl font-bold mb-2 text-primary font-headline\">{property.title}</h1>\n                <div className=\"flex flex-wrap items-center text-muted-foreground text-sm md:text-base\">\n                    <MapPin size={18} className=\"mr-2 flex-shrink-0\" />\n                    <span className=\"mr-2\">{property.address || property.location}</span>\n                    {property.rating !== undefined && property.rating !== null && (\n                        <>\n                            <span className=\"mx-1 hidden sm:inline\">·</span>\n                            <Star size={18} className=\"mr-1 text-amber-500 fill-current flex-shrink-0\" />\n                            <span>{property.rating.toFixed(1)} ({property.reviewsCount || 0} reviews)</span>\n                        </>\n                    )}\n                </div>\n            </div>\n            {(isOwner || isAdmin) && (\n              <Button asChild variant=\"outline\" className=\"mt-4 md:mt-0 border-primary text-primary hover:bg-primary/10\">\n                <Link href={`/properties/${property.id}/edit`}>\n                  <Edit3 className=\"mr-2 h-4 w-4\" /> Edit Property\n                </Link>\n              </Button>\n            )}\n        </div>\n\n        {/* Image Carousel Section */}\n        <div className=\"mb-8\">\n          {hasImages ? (\n            <Carousel\n              opts={{\n                align: \"start\",\n                loop: true,\n              }}\n              className=\"w-full max-w-4xl mx-auto\"\n            >\n              <CarouselContent>\n                {property.images.map((imgUrl, index) => (\n                  <CarouselItem key={index} className=\"md:basis-full\">\n                    <div className=\"relative aspect-video md:aspect-[16/9] rounded-lg overflow-hidden shadow-lg\">\n                      <Image\n                        src={imgUrl}\n                        alt={`${property.title} image ${index + 1}`}\n                        fill\n                        sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 60vw\"\n                        className=\"object-cover\"\n                        priority={index === 0} \n                        data-ai-hint={property.type === 'House' ? `house photo ${index+1}` : property.type === 'Apartment' ? `apartment photo ${index+1}` : `accommodation photo ${index+1}`}\n                      />\n                    </div>\n                  </CarouselItem>\n                ))}\n              </CarouselContent>\n              {property.images.length > 1 && (\n                <>\n                  <CarouselPrevious className=\"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-10 bg-background/70 hover:bg-background text-foreground disabled:bg-background/40\" />\n                  <CarouselNext className=\"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-10 bg-background/70 hover:bg-background text-foreground disabled:bg-background/40\" />\n                </>\n              )}\n            </Carousel>\n          ) : (\n            <div className=\"relative aspect-video md:aspect-[16/9] rounded-lg overflow-hidden shadow-lg bg-muted flex items-center justify-center max-w-4xl mx-auto\">\n              <ImageIcon size={64} className=\"text-muted-foreground/50\" data-ai-hint=\"placeholder property\" />\n            </div>\n          )}\n        </div>\n\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12\">\n          <div className=\"lg:col-span-2\">\n            <div className=\"pb-6 border-b border-border\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h2 className=\"text-2xl font-semibold font-headline\">\n                            {property.type} hosted by {property.host.name}\n                        </h2>\n                        <p className=\"text-muted-foreground\">\n                            {property.maxGuests} guests · {property.bedrooms} bedroom(s) · {property.bathrooms} bath(s)\n                        </p>\n                    </div>\n                    {property.host.avatarUrl ? (\n                        <Image src={property.host.avatarUrl} alt={property.host.name} width={60} height={60} className=\"rounded-full shadow\" data-ai-hint={hostAvatarHint} />\n                    ) : (\n                        <div className=\"w-[60px] h-[60px] rounded-full bg-muted flex items-center justify-center shadow\" data-ai-hint=\"avatar placeholder\">\n                            <UserCircle size={30} className=\"text-muted-foreground\" />\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <div className=\"py-6 border-b border-border\">\n              <h3 className=\"text-xl font-semibold mb-3 font-headline\">About this place</h3>\n              <p className=\"text-foreground/90 whitespace-pre-line leading-relaxed\">{property.description}</p>\n            </div>\n\n            {property.amenities && property.amenities.length > 0 && (\n                <div className=\"py-6\">\n                <h3 className=\"text-xl font-semibold mb-4 font-headline\">What this place offers</h3>\n                <ul className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3\">\n                    {property.amenities.map((amenity) => (\n                    <li key={amenity} className=\"flex items-center\">\n                        <PropertyAmenityIcon amenity={amenity} className=\"mr-3 h-5 w-5 text-primary flex-shrink-0\" />\n                        <span>{amenity}</span>\n                    </li>\n                    ))}\n                </ul>\n                </div>\n            )}\n          </div>\n\n          <div className=\"lg:col-span-1\">\n            <div className=\"sticky top-24 p-6 border border-border rounded-lg shadow-xl bg-card\">\n              <p className=\"text-2xl font-bold mb-1\">\n                <DollarSign className=\"inline h-6 w-6 mr-1 relative -top-0.5\" />\n                {property.price}{' '}\n                <span className=\"text-base font-normal text-muted-foreground\">{getPricePeriodText(property.pricePeriod)}</span>\n              </p>\n              {property.rating !== undefined && property.rating !== null && (\n                <div className=\"flex items-center text-sm text-muted-foreground mb-4\">\n                    <Star size={16} className=\"mr-1 text-amber-500 fill-current\" />\n                    <span>{property.rating.toFixed(1)} ({property.reviewsCount || 0} reviews)</span>\n                </div>\n              )}\n\n              <div className=\"mb-4\">\n                <PropertyBookingCalendar />\n              </div>\n\n              <Button size=\"lg\" className=\"w-full bg-accent hover:bg-accent/90 text-accent-foreground\">\n                Reserve (Coming Soon)\n              </Button>\n              <p className=\"text-xs text-muted-foreground text-center mt-2\">You won&apos;t be charged yet</p>\n            </div>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default PropertyDetailsPage;\n\n"],"names":[],"mappings":"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","debugId":null}}]
}